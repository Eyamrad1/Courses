{"ast":null,"code":"import { ConfirmDialogComponent } from '../../../confirm-dialog/confirm-dialog.component';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatButtonModule } from '@angular/material/button';\nimport { CommonModule } from '@angular/common';\nimport { MatIconModule } from '@angular/material/icon';\nimport { AppModule } from '../../../app.module';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"../../../service/course.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/tooltip\";\nfunction CourseListComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"p\");\n    i0.ɵɵtext(2, \"Loading courses...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CourseListComponent_table_7_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵelement(8, \"img\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function CourseListComponent_table_7_tr_14_Template_button_click_10_listener() {\n      const course_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.navigateToUpdateCourse(course_r2));\n    });\n    i0.ɵɵelementStart(11, \"mat-icon\");\n    i0.ɵɵtext(12, \"edit\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function CourseListComponent_table_7_tr_14_Template_button_click_13_listener() {\n      const course_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.confirmDelete(course_r2));\n    });\n    i0.ɵɵelementStart(14, \"mat-icon\");\n    i0.ɵɵtext(15, \"delete\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const course_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(course_r2.idCourse);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(course_r2.courseName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", course_r2.price, \" DT/Month\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", course_r2.imageUrl, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction CourseListComponent_table_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 9)(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Course Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Image\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"tbody\");\n    i0.ɵɵtemplate(14, CourseListComponent_table_7_tr_14_Template, 16, 4, \"tr\", 10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.paginatedCourse);\n  }\n}\nexport let CourseListComponent = /*#__PURE__*/(() => {\n  class CourseListComponent {\n    constructor(dialog, snackBar, courseService, router) {\n      this.dialog = dialog;\n      this.snackBar = snackBar;\n      this.courseService = courseService;\n      this.router = router;\n      this.courses = [];\n      this.paginatedCourse = [];\n      this.currentPage = 0;\n      this.pageSize = 6;\n      this.totalPages = 0;\n    }\n    ngOnInit() {\n      this.loadCourses();\n    }\n    loadCourses() {\n      this.courseService.getAllCourses().subscribe(data => {\n        this.courses = data;\n        this.totalPages = Math.ceil(this.courses.length / this.pageSize);\n        this.updatePaginatedCourse();\n        console.log(this.courses); // Check if data is correctly populated\n      }, error => {\n        console.error('Error loading courses', error);\n      });\n    }\n    updatePaginatedCourse() {\n      const startIndex = this.currentPage * this.pageSize;\n      const endIndex = startIndex + this.pageSize;\n      this.paginatedCourse = this.courses.slice(startIndex, endIndex);\n    }\n    previousPage() {\n      if (this.currentPage > 0) {\n        this.currentPage--;\n        this.updatePaginatedCourse();\n      }\n    }\n    nextPage() {\n      if (this.currentPage < this.totalPages - 1) {\n        this.currentPage++;\n        this.updatePaginatedCourse();\n      }\n    }\n    confirmDelete(course) {\n      const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n        width: '400px',\n        data: {\n          action: 'delete',\n          item: 'course'\n        }\n      });\n      dialogRef.afterClosed().subscribe(confirmed => {\n        if (confirmed) {\n          this.deleteCourse(course);\n          this.snackBar.open('Course deleted successfully!', 'Close', {\n            duration: 7000\n          });\n        }\n      });\n    }\n    navigateToAddCourse() {\n      this.router.navigate(['/course']);\n    }\n    navigateToUpdateCourse(course) {\n      if (course && course.idCourse) {\n        this.router.navigate(['/courseUpdate', course.idCourse]);\n      }\n    }\n    deleteCourse(course) {\n      if (course && course.idCourse) {\n        const idCourse = course.idCourse;\n        this.courseService.deleteCourse(idCourse).subscribe(() => {\n          console.log('Course deleted successfully');\n          this.loadCourses(); // Refresh the courses list\n        }, error => {\n          console.error('Error deleting course', error);\n          // Handle error appropriately\n        });\n      }\n    }\n    static #_ = this.ɵfac = function CourseListComponent_Factory(t) {\n      return new (t || CourseListComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.MatSnackBar), i0.ɵɵdirectiveInject(i3.CourseService), i0.ɵɵdirectiveInject(i4.Router));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CourseListComponent,\n      selectors: [[\"app-course-list\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 15,\n      vars: 10,\n      consts: [[1, \"course-list-container\"], [1, \"add-course-btn-container\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [\"class\", \"loading-message\", 4, \"ngIf\"], [\"class\", \"course-table\", 4, \"ngIf\"], [1, \"pagination-container\"], [1, \"pagination-btn\", 3, \"click\", \"disabled\"], [1, \"page-info\"], [1, \"loading-message\"], [1, \"course-table\"], [4, \"ngFor\", \"ngForOf\"], [\"alt\", \"Course Image\", 1, \"course-image\", 3, \"src\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", \"matTooltip\", \"Update\", 3, \"click\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", \"matTooltip\", \"Delete\", 3, \"click\"]],\n      template: function CourseListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2, \"Courses List\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 1)(4, \"button\", 2);\n          i0.ɵɵlistener(\"click\", function CourseListComponent_Template_button_click_4_listener() {\n            return ctx.navigateToAddCourse();\n          });\n          i0.ɵɵtext(5, \"Add Course\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(6, CourseListComponent_div_6_Template, 3, 0, \"div\", 3)(7, CourseListComponent_table_7_Template, 15, 1, \"table\", 4);\n          i0.ɵɵelementStart(8, \"div\", 5)(9, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function CourseListComponent_Template_button_click_9_listener() {\n            return ctx.previousPage();\n          });\n          i0.ɵɵtext(10, \" Previous \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"span\", 7);\n          i0.ɵɵtext(12);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"button\", 6);\n          i0.ɵɵlistener(\"click\", function CourseListComponent_Template_button_click_13_listener() {\n            return ctx.nextPage();\n          });\n          i0.ɵɵtext(14, \" Next \");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", !ctx.courses.length);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.courses.length);\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"disabled\", ctx.currentPage === 0);\n          i0.ɵɵproperty(\"disabled\", ctx.currentPage === 0);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate2(\"Page \", ctx.currentPage + 1, \" of \", ctx.totalPages, \"\");\n          i0.ɵɵadvance();\n          i0.ɵɵclassProp(\"disabled\", ctx.currentPage === ctx.totalPages - 1);\n          i0.ɵɵproperty(\"disabled\", ctx.currentPage === ctx.totalPages - 1);\n        }\n      },\n      dependencies: [CommonModule, i5.NgForOf, i5.NgIf, MatIconModule, i6.MatIcon, MatButtonModule, i7.MatIconButton, MatTooltipModule, i8.MatTooltip, AppModule],\n      styles: [\".course-list-container[_ngcontent-%COMP%]{max-width:800px;margin:30px auto;padding:20px;background-color:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 8px #0000001a}.course-list-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.add-course-btn-container[_ngcontent-%COMP%]{text-align:right;margin-bottom:10px}.btn[_ngcontent-%COMP%]{padding:8px 12px;font-size:14px;border:none;border-radius:4px;cursor:pointer}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.course-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:10px}.course-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .course-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;padding:10px;border:1px solid #ddd}.course-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa}.course-image[_ngcontent-%COMP%]{max-width:100px;border-radius:4px}.pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px}.pagination-btn[_ngcontent-%COMP%]{padding:8px 16px;margin:0 5px;font-size:14px;border-radius:4px;border:1px solid #ddd;cursor:pointer}.pagination-btn[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff}.pagination-btn.disabled[_ngcontent-%COMP%]{background-color:#f0f0f0;cursor:not-allowed}.page-info[_ngcontent-%COMP%]{font-size:14px;margin:0 10px}\"]\n    });\n  }\n  return CourseListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
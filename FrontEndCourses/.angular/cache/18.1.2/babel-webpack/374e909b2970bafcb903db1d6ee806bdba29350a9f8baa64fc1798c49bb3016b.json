{"ast":null,"code":"import { FormsModule } from '@angular/forms'; // Import FormsModule\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../service/course.service\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = [\"courseForm\"];\nfunction CourseComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"img\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", ctx_r2.imagePreview, i0.ɵɵsanitizeUrl);\n  }\n}\nexport let CourseComponent = /*#__PURE__*/(() => {\n  class CourseComponent {\n    constructor(courseService, snackBar) {\n      this.courseService = courseService;\n      this.snackBar = snackBar;\n      this.selectedFile = null;\n      this.imagePreview = null;\n    }\n    ngOnInit() {}\n    onSubmit(courseForm) {\n      if (!courseForm.valid) {\n        return; // If the form is not valid, do nothing\n      }\n      const formData = new FormData();\n      formData.append('courseName', courseForm.value.courseName);\n      formData.append('price', courseForm.value.price);\n      // Check if an image is selected and append it\n      if (this.selectedFile) {\n        formData.append('image', this.selectedFile); // Ensure this matches the backend's expected field name\n      }\n      // Call the service to add the course\n      this.courseService.AddCourse(formData).subscribe({\n        next: response => {\n          console.log('Course added successfully', response);\n          // Show success message\n          this.snackBar.open('Event added successfully!', 'Close', {\n            duration: 7000\n          });\n        },\n        error: err => {\n          console.error('Error adding course', err);\n        }\n      });\n    }\n    onFileSelected(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.selectedFile = file;\n        const reader = new FileReader();\n        reader.onload = e => {\n          this.imagePreview = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      }\n    }\n    static #_ = this.ɵfac = function CourseComponent_Factory(t) {\n      return new (t || CourseComponent)(i0.ɵɵdirectiveInject(i1.CourseService), i0.ɵɵdirectiveInject(i2.MatSnackBar));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CourseComponent,\n      selectors: [[\"app-course\"]],\n      viewQuery: function CourseComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.courseForm = _t.first);\n        }\n      },\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 17,\n      vars: 2,\n      consts: [[\"courseForm\", \"ngForm\"], [3, \"submit\"], [1, \"form-group\"], [\"for\", \"courseName\"], [\"type\", \"text\", \"id\", \"courseName\", \"name\", \"courseName\", \"ngModel\", \"\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"price\"], [\"type\", \"number\", \"id\", \"price\", \"name\", \"price\", \"ngModel\", \"\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"image\"], [\"type\", \"file\", \"id\", \"image\", \"name\", \"image\", 1, \"form-control\", 3, \"change\"], [4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"alt\", \"Image Preview\", 1, \"img-fluid\", 3, \"src\"]],\n      template: function CourseComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"form\", 1, 0);\n          i0.ɵɵlistener(\"submit\", function CourseComponent_Template_form_submit_0_listener() {\n            i0.ɵɵrestoreView(_r1);\n            const courseForm_r2 = i0.ɵɵreference(1);\n            return i0.ɵɵresetView(ctx.onSubmit(courseForm_r2));\n          });\n          i0.ɵɵelementStart(2, \"div\", 2)(3, \"label\", 3);\n          i0.ɵɵtext(4, \"Course Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(5, \"input\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"div\", 2)(7, \"label\", 5);\n          i0.ɵɵtext(8, \"Price\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(9, \"input\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 2)(11, \"label\", 7);\n          i0.ɵɵtext(12, \"Image\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"input\", 8);\n          i0.ɵɵlistener(\"change\", function CourseComponent_Template_input_change_13_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onFileSelected($event));\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(14, CourseComponent_div_14_Template, 2, 1, \"div\", 9);\n          i0.ɵɵelementStart(15, \"button\", 10);\n          i0.ɵɵtext(16, \"Submit\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          const courseForm_r2 = i0.ɵɵreference(1);\n          i0.ɵɵadvance(14);\n          i0.ɵɵproperty(\"ngIf\", ctx.imagePreview);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", !courseForm_r2.valid);\n        }\n      },\n      dependencies: [FormsModule, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm]\n    });\n  }\n  return CourseComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}